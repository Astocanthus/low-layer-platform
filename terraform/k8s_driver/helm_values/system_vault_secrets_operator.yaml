# Copyright (C) - LOW-LAYER
# System Vault Secrets Operator Helm values - Vault Integration Configuration

# =============================================================================
# CONTROLLER CONFIGURATION
# =============================================================================
# Vault Secrets Operator controller settings with encrypted client cache
controller:
  manager:
    clientCache:
      persistenceModel: direct-encrypted
      storageEncryption:
        enabled: true
        mount: kubernetes-low-layer
        keyName: vso-client-cache
        transitMount: transit-k8s-low-layer
        kubernetes:
          role: vault-auth-role-operator-k8s-low-layer
          serviceAccount: vault-secrets-operator-controller-manager-k8s-low-layer
          tokenAudiences: [
            "https://kube.low-layer.internal"
          ]

# =============================================================================
# NODE ASSIGNMENT CONFIGURATION
# =============================================================================
# Deploy operator on control plane nodes for secure secrets management
  tolerations:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
      effect: NoSchedule

  nodeSelector:
    node-role.kubernetes.io/control-plane: ""