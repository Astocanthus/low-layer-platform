[app:metaapp]
paste.app_factory = nova.api.metadata.handler:MetadataRequestHandler.factory

[app:osapi_compute_app_v21]
paste.app_factory = nova.api.openstack.compute:APIRouterV21.factory

[app:oscomputeversionapp]
paste.app_factory = nova.api.openstack.compute.versions:Versions.factory

[composite:metadata]
/ = meta
use = egg:Paste#urlmap

[composite:openstack_compute_api_v21]
keystone = cors http_proxy_to_wsgi compute_req_id faultwrap sizelimit authtoken audit keystonecontext osapi_compute_app_v21
noauth2 = cors http_proxy_to_wsgi compute_req_id faultwrap sizelimit noauth2 osapi_compute_app_v21
use = call:nova.api.auth:pipeline_factory_v21

[composite:openstack_compute_api_v21_legacy_v2_compatible]
keystone = cors http_proxy_to_wsgi compute_req_id faultwrap sizelimit authtoken audit keystonecontext legacy_v2_compatible osapi_compute_app_v21
noauth2 = cors http_proxy_to_wsgi compute_req_id faultwrap sizelimit noauth2 legacy_v2_compatible osapi_compute_app_v21
use = call:nova.api.auth:pipeline_factory_v21

[composite:osapi_compute]
/ = oscomputeversions
/v2 = openstack_compute_api_v21_legacy_v2_compatible
/v2.1 = openstack_compute_api_v21
use = call:nova.api.openstack.urlmap:urlmap_factory

[filter:audit]
audit_map_file = /etc/nova/api_audit_map.conf
paste.filter_factory = keystonemiddleware.audit:filter_factory

[filter:authtoken]
paste.filter_factory = keystonemiddleware.auth_token:filter_factory

[filter:compute_req_id]
paste.filter_factory = nova.api.compute_req_id:ComputeReqIdMiddleware.factory

[filter:cors]
oslo_config_project = nova
paste.filter_factory = oslo_middleware.cors:filter_factory

[filter:faultwrap]
paste.filter_factory = nova.api.openstack:FaultWrapper.factory

[filter:http_proxy_to_wsgi]
paste.filter_factory = oslo_middleware.http_proxy_to_wsgi:HTTPProxyToWSGI.factory

[filter:keystonecontext]
paste.filter_factory = nova.api.auth:NovaKeystoneContext.factory

[filter:legacy_v2_compatible]
paste.filter_factory = nova.api.openstack:LegacyV2CompatibleWrapper.factory

[filter:noauth2]
paste.filter_factory = nova.api.openstack.auth:NoAuthMiddleware.factory

[filter:request_id]
paste.filter_factory = oslo_middleware:RequestId.factory

[filter:sizelimit]
paste.filter_factory = oslo_middleware:RequestBodySizeLimiter.factory

[pipeline:meta]
pipeline = cors metaapp

[pipeline:oscomputeversions]
pipeline = faultwrap http_proxy_to_wsgi oscomputeversionapp